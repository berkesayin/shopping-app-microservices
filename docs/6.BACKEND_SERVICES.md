# Backend Services

This `ecommerce` project is developed with `Microservices` architecture and `API Gateway` pattern. These are the services:
- `auth`
- `basket`
- `config-server`
- `customer`
- `discovery`
- `gateway`
- `notification`
- `order`
- `payment`
- `product`
- `search`

### Docker Containers

For the project `infrastructure` and `database` tools are built and run with `Docker Compose`. So, make sure the `containers` are running before building services.

```sh 
docker ps
```

Response:

```sh
CONTAINER ID   IMAGE                                          COMMAND                  CREATED        STATUS                   PORTS                                            NAMES
93957cb83508   docker.elastic.co/beats/elastic-agent:8.17.4   "/usr/bin/tini -- /u…"   24 hours ago   Up 2 hours               0.0.0.0:8200->8200/tcp, 0.0.0.0:8220->8220/tcp   be-elastic-agent
9a577d1f5c04   redis:7-alpine                                 "docker-entrypoint.s…"   45 hours ago   Up 2 hours               0.0.0.0:6379->6379/tcp                           be-redis
0db9caec046e   mongo-express:latest                           "/sbin/tini -- /dock…"   8 days ago     Up 2 hours               0.0.0.0:8081->8081/tcp                           be-mongo-express
eecc280979c8   confluentinc/cp-kafka:latest                   "/etc/confluent/dock…"   8 days ago     Up 2 hours               0.0.0.0:9092->9092/tcp                           be-kafka
b6cae9a88e80   mongo:latest                                   "docker-entrypoint.s…"   8 days ago     Up 2 hours (healthy)     0.0.0.0:27017->27017/tcp                         be-mongodb
6238a4480e91   confluentinc/cp-zookeeper:latest               "/etc/confluent/dock…"   8 days ago     Up 2 hours               2888/tcp, 3888/tcp, 0.0.0.0:22181->2181/tcp      be-zookeeper
11225e253dcc   redis/redisinsight:latest                      "./docker-entry.sh n…"   8 days ago     Up 2 hours               5000/tcp, 0.0.0.0:5540->5540/tcp                 be-redisinsight
a8630aee4ea3   maildev/maildev:latest                         "bin/maildev"            8 days ago     Up 2 hours (unhealthy)   0.0.0.0:1025->1025/tcp, 0.0.0.0:1080->1080/tcp   be-maildev
5d071875b789   postgres:latest                                "docker-entrypoint.s…"   8 days ago     Up 2 hours               0.0.0.0:5432->5432/tcp                           be-pgdb
6a091140d33e   dpage/pgadmin4:latest                          "/entrypoint.sh"         8 days ago     Up 2 hours               443/tcp, 0.0.0.0:5050->80/tcp                    be-pgadmin
```


### Config Server

`config-server` provides centralized management for the configuration of all services. 

Firstly, `config-server` is built and run.

Build the `config-server`. For that locate to `config-server` at terminal: `cd services/config-server`

```sh 
mvn clean install
```

Run the service.

```sh 
mvn spring-boot:run
```

### Discovery Service

`Discovery` service enables service discovery for other services. After `config-server`, `discovery` service is built and run.

Build the `discovery` service. For that locate to `discovery` at terminal: `cd services/discovery`

```sh 
mvn clean install
```

Run the service.

```sh 
mvn spring-boot:run
```

### Build and Run A Service

After `config-server`, `discovery` service are built and run, start `auth` service as example. 

Build the `auth` service. For that locate to `auth` at terminal: `cd services/auth`

```sh 
mvn clean install
```

Run the service.

```sh 
mvn spring-boot:run
```

Run any other `microservice` you want to work with.

### Build and Run Gateway Service

After running the services you want to work with, `gateway` service is supposed to be running, because all the requests coming from client first goes to `API Gateway` and then routed to services after validations.

Build the `gateway` service. For that locate to `gateway` at terminal: `cd services/gateway`

```sh 
mvn clean install
```

Run the service.

```sh 
mvn spring-boot:run
```
